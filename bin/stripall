#!/bin/sh

### bash extension
umask +rx,u=rwx || umask 022

set -e
stat="/usr/src/STATUS"

inst() {
	a="$1"
	if test -f $stat/out/$a ; then
		sed -e "s|^/*|/|" < $stat/out/$a | while read a; do if test -x "$a" ; then strip --strip-debug "$a" && echo "/$a" || true ; fi; done
	elif test -f $stat/hosts/$a ; then
		$stat/bin/stripall < $stat/hosts/$a
	else
		echo $a: nicht gefunden
		echo $a >> $sk
	fi
}

if test -n "$*" ; then
	for x ; do
		inst "$x"
	done
else
	while read x ; do
		inst "$x"
	done
fi

exit 0
